<% content_for :page_title, "Teams" %>
<% content_for :actions do %>
  <%= link_to "New", new_team_path,
    class: 'btn btn-sm btn-outline-primary' %>
<% end %>

<table class="table">
  <thead>
    <tr>
      <th><%= Team.human_attribute_name(:name) %></th>
      <th><%= "Title" %></th>
    </tr>
  </thead>

  <tbody>
    <% @teams.each do |team| %>
      <tr>
        <td><%= team.name %> <%= if current_user.team == team then content_tag("i", "(yours!)") end %></td>
        <td>
          <% if current_user.team != team %>
            <%= form_with(model: current_user, url: join_team_user_path(current_user), local: true) do |builder| %>
              <%= builder.hidden_field :team_id, value: team.id %>
              <%= builder.submit "Join!" %>
            <% end %>
          |
          <% end %>
          <%= link_to "Show", team %>
          |
          <%= link_to "Edit", edit_team_path(team) %>
          |
          <%= link_to "Destroy", team, method: :delete, data: { confirm: I18n.t('views.actions.confirm_destroy') } %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
